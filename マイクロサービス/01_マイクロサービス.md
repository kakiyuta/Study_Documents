# マイクロサービス

## マイクロサービスとは？

従来の全サービスを集約したものではなく、サービスを細かい機能で分割し各依存性をなくす（または低める）アーキテクチャ（考え方）です。

メリットとして

- 拡張性
  - 新しい機能追加をしたい場合、新たにサーバまたはコンテナを立ち上げて実装することで既存サービスに影響がでない
  - デプロイも用意
- 保守性
  - 不具合が起きた際に、影響範囲は該当サービスと連携している所のみなので、全てのサービスが停止するなどのリスクは少ない



逆にデメリットとして

- 速度
  - 各サービスがHTTPプロトコルなので通信を行うので、どんなに処理を最適化しても通信速度がボトルネックになる
- トランザクション
  - 複数サービスをまたがる場合のトランザクションの使用には気を使った設計が必要。
- 設計
  - 上記らの課題を解決するための設計技量は高いレベルを求められる



## 実現する方法

あくまで一例

- 各サービスの実行環境
  - Dockerなどのコンテナを用いた仮想環境

- 各サービスとの連携方法
  - API（REST API）
  - 特定の技術にとらわれないHTTPなどのプロトコルを用いるのがキモ
- 各サービスで使用するフレームワーク
  - ぶっちゃけ何でもいいが、軽量なフレームワークが望ましい。フレームワークを使わないという選択もあり。



## 分散トレーシングシステム

マイクロサービスを運用するに当たって、各サービスの依存関係や分散されたサービスの通信追跡情報はデバッグする上で重要な情報。

それを可視化するツールでtwitter社がオープンソースで公開している`Zipkin`がある。



## AWSでマイクロサービス

### コンピューティング

- コンテナ
  - Amazon Elastic Container Service
- サーバーレス
  - AWS Lambda



### ストレージとデータベース

- キャッシュ
  - Amazon ElastiCache
- オブジェクトストレージ
  - Amazon S3
- NoSQL データベース
  - Amazon DynamoDB
- RDB(リレーショナルデータベース)
  - Amazon RDS
  - Amazon Aurora

・・・etc

詳細はAWSのサイトを参照

[マイクロサービスの概要 | AWS](https://aws.amazon.com/jp/microservices/)

## 参考サイト

- [事例つき！マイクロサービスとは？基礎知識からメリットとデメリットまでを解説](https://ec-orange.jp/ec-media/?p=23458)
- [マイクロサービス - Wikipedia](https://ja.wikipedia.org/wiki/%E3%83%9E%E3%82%A4%E3%82%AF%E3%83%AD%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9)
- [マイクロサービスとは何か？ デジタル変革の時代を生き残るための、テクノロジー入門 - Customer Success](https://www.salesforce.com/jp/blog/2016/03/microservices.html)
- [マイクロサービスの概要 | AWS](https://aws.amazon.com/jp/microservices/)
- 